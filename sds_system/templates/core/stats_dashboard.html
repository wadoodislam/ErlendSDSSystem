<head>
  <meta charset="UTF-8">
  <title>Dashboard with Flexmonster</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

</head>
<body>
    <div id="pivot-table-container" data-url="{% url 'pivot_data' %}"></div>
    <div id="pivot-chart-container"></div>
    <style>
        table, th, td {
          border: 1px solid black;
          border-collapse: collapse;
        }
        th, td {
          padding: 5px;
          text-align: left;
        }
        </style>
     <table>
            <tbody>
            <tr>
                <th>Provider Name</th>
                <th>Product Count</th>
            </tr>
            {% for table_data in table %}
            <tr>
                <td>{{ table_data.provider }}</td>
                <td>{{ table_data.products }}</td>
            </tr>


    {% endfor %}
            </tbody>
        </table>

    {% block content %}
      <div id="container" style="width: 75%;">
        <canvas id="pie-chart"></canvas>
      </div>


      <script>

        var config = {
          type: 'pie',
          data: {
            datasets: [{
              data: {{ data }} ,
              backgroundColor: [
                '#00FFFF', '#0000FF', '#DE6618', '#80215A', '#214280'
              ],
              label: 'Product Count'
            }],
            labels: {{ labels|safe }}
          },
          options: {
            responsive: true }
        };

        window.onload = function() {
          var ctx = document.getElementById('pie-chart').getContext('2d');
          window.myPie = new Chart(ctx, config);
        };

      </script>

    {% endblock %}

</body>
